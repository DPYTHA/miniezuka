<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Admin - Miniezuka</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f6fa;
            color: #2c3e50;
        }

        .admin-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 250px;
            background: #2c3e50;
            color: white;
            padding: 20px 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }

        .logo {
            text-align: center;
            padding: 20px;
            border-bottom: 1px solid #34495e;
            margin-bottom: 20px;
        }

        .logo h1 {
            font-size: 24px;
            font-weight: 600;
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            padding: 15px 25px;
            cursor: pointer;
            transition: background 0.3s;
            border-left: 4px solid transparent;
        }

        .nav-item:hover {
            background: #34495e;
        }

        .nav-item.active {
            background: #34495e;
            border-left-color: #3498db;
        }

        .nav-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 250px;
            padding: 20px;
        }

        .header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            display: flex;
            justify-content: between;
            align-items: center;
        }
        .fee_rates{
            cursor: pointer;

        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
.refresh-btn, .logout-btn, .conversion-btn {
    /* Styles communs pour tous les boutons */
    padding: 8px 16px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    margin-left: 10px;
}

/* Styles sp√©cifiques si n√©cessaire */
.conversion-btn {
    background-color: #4CAF50; /* Exemple de couleur diff√©rente */
    color: white;
}
        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card.pending {
            border-left: 4px solid #e74c3c;
        }

        .stat-card.users {
            border-left: 4px solid #3498db;
        }

        .stat-card.balance {
            border-left: 4px solid #27ae60;
        }

        .stat-card.transactions {
            border-left: 4px solid #f39c12;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin: 10px 0;
        }

        .stat-label {
            color: #7f8c8d;
            font-size: 0.9em;
        }

        /* Sections */
        .section {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            overflow: hidden;
        }

        .section-header {
            padding: 20px;
            border-bottom: 1px solid #ecf0f1;
            display: flex;
            justify-content: between;
            align-items: center;
        }

        .section-title {
            font-size: 1.2em;
            font-weight: 600;
        }

        .section-content {
            padding: 20px;
        }

        /* Tables */
        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ecf0f1;
        }

        th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
        }

        tr:hover {
            background: #f8f9fa;
        }

        /* Badges */
        .badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 600;
        }

        .badge.pending {
            background: #fff3cd;
            color: #856404;
        }

        .badge.approved {
            background: #d1ecf1;
            color: #0c5460;
        }

        .badge.rejected {
            background: #f8d7da;
            color: #721c24;
        }

        /* Buttons */
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background 0.3s;
        }

        .btn-approve {
            background: #27ae60;
            color: white;
        }

        .btn-reject {
            background: #e74c3c;
            color: white;
        }

        .btn-view {
            background: #3498db;
            color: white;
        }

        .btn:hover {
            opacity: 0.9;
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 10px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid #ecf0f1;
            margin-bottom: 20px;
        }

        .tab {
            padding: 15px 25px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            border-bottom-color: #3498db;
            color: #3498db;
            font-weight: 600;
        }

        /* Refresh Button */
        .refresh-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 10px;
        }

        .logout-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-left: auto;
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">
                <h1>Miniezuka Admin</h1>
            </div>
            <ul class="nav-menu">
                <li class="nav-item active" data-tab="dashboard">
                    <i>üìä</i> Tableau de Bord
                </li>
                <li class="nav-item" data-tab="pending">
                    <i>‚è≥</i> Transactions en Attente
                    <span id="pending-badge" class="badge pending" style="float: right; margin-top: 2px;">0</span>
                </li>
                <li class="nav-item" data-tab="users">
                    <i>üë•</i> Utilisateurs
                </li>
                <li class="nav-item" data-tab="transactions">
                    <i>üí≥</i> Toutes les Transactions
                </li>
                <li class="nav-item" data-tab="reports">
                    <i>üìà</i> Rapports
                </li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="header">
                <h2 id="page-title">Tableau de Bord</h2>
                <div>
                    <button class="refresh-btn" onclick="loadData()">üîÑ Actualiser</button>
                    <button class="logout-btn" onclick="logout()">üö™ D√©connexion</button>
                    <button class="conversion-btn" onclick="window.location.href='/admin/fees-management'">üìä Conversion Rate</button>
                </div>
            </div>

            <!-- Dashboard Tab -->
            <div id="dashboard-tab" class="tab-content">
                <div class="stats-grid">
                    <div class="stat-card users">
                        <div class="stat-label">Utilisateurs Totaux</div>
                        <div class="stat-number" id="total-users">0</div>
                        <div class="stat-subtext" id="new-users-24h">+0 aujourd'hui</div>
                    </div>
                    <div class="stat-card balance">
                        <div class="stat-label">Solde Total</div>
                        <div class="stat-number" id="total-balance">0</div>
                        <div class="stat-subtext">Tous les utilisateurs</div>
                    </div>
                    <div class="stat-card pending">
                        <div class="stat-label">En Attente</div>
                        <div class="stat-number" id="total-pending">0</div>
                        <div class="stat-subtext">Transactions √† traiter</div>
                    </div>
                    <div class="stat-card transactions">
                        <div class="stat-label">D√©p√¥ts 24h</div>
                        <div class="stat-number" id="deposits-24h">0</div>
                        <div class="stat-subtext">Derni√®res 24 heures</div>
                    </div>
                </div>

                <div class="section">
                    <div class="section-header">
                        <h3 class="section-title">Aper√ßu des Transactions R√©centes</h3>
                    </div>
                    <div class="section-content">
                        <div class="table-container">
                            <table id="recent-transactions-table">
                                <thead>
                                    <tr>
                                        <th>Type</th>
                                        <th>Utilisateur</th>
                                        <th>Montant</th>
                                        <th>Statut</th>
                                        <th>Date</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="recent-transactions-body">
                                    <!-- Les donn√©es seront charg√©es ici -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pending Transactions Tab -->
            <div id="pending-tab" class="tab-content" style="display: none;">
                <div class="tabs">
                    <div class="tab active" data-subtab="all-pending">Tous</div>
                    <div class="tab" data-subtab="deposits-pending">D√©p√¥ts</div>
                    <div class="tab" data-subtab="withdrawals-pending">Retraits</div>
                    <div class="tab" data-subtab="transfers-pending">Transferts</div>
                </div>

                <div id="all-pending" class="subtab-content">
                    <!-- Contenu charg√© dynamiquement -->
                </div>
            </div>

            <!-- Users Tab -->
            <div id="users-tab" class="tab-content" style="display: none;">
                <div class="section">
                    <div class="section-header">
                        <h3 class="section-title">Gestion des Utilisateurs</h3>
                    </div>
                    <div class="section-content">
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Nom</th>
                                        <th>T√©l√©phone</th>
                                        <th>Pays</th>
                                        <th>Solde</th>
                                        <th>Date d'inscription</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="users-table-body">
                                    <!-- Les donn√©es seront charg√©es ici -->
                                </tbody>
                            </table>
                        </div>
                        <div id="users-pagination" style="margin-top: 20px; text-align: center;">
                            <!-- Pagination -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- All Transactions Tab -->
            <div id="transactions-tab" class="tab-content" style="display: none;">
                <div class="section">
                    <div class="section-header">
                        <h3 class="section-title">Toutes les Transactions</h3>
                        <div>
                            <select id="transaction-type-filter">
                                <option value="all">Tous les types</option>
                                <option value="deposits">D√©p√¥ts</option>
                                <option value="withdrawals">Retraits</option>
                                <option value="transfers">Transferts</option>
                            </select>
                            <select id="transaction-status-filter">
                                <option value="all">Tous les statuts</option>
                                <option value="pending">En attente</option>
                                <option value="approved">Approuv√©</option>
                                <option value="rejected">Rejet√©</option>
                            </select>
                        </div>
                    </div>
                    <div class="section-content">
                        <div class="table-container">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Type</th>
                                        <th>Utilisateur</th>
                                        <th>Montant</th>
                                        <th>Statut</th>
                                        <th>Date</th>
                                        <th>D√©tails</th>
                                    </tr>
                                </thead>
                                <tbody id="all-transactions-body">
                                    <!-- Les donn√©es seront charg√©es ici -->
                                </tbody>
                            </table>
                        </div>
                        <div id="transactions-pagination" style="margin-top: 20px; text-align: center;">
                            <!-- Pagination -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reports Tab -->
            <div id="reports-tab" class="tab-content" style="display: none;">
                <div class="section">
                    <div class="section-header">
                        <h3 class="section-title">Rapports et Statistiques</h3>
                    </div>
                    <div class="section-content">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div>
                                <canvas id="transactionsChart" width="400" height="200"></canvas>
                            </div>
                            <div>
                                <canvas id="usersChart" width="400" height="200"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let currentPage = {
            users: 1,
            transactions: 1
        };

        // Chargement initial
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            setupEventListeners();
        });

        function setupEventListeners() {
            // Navigation principale
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function() {
                    const tab = this.getAttribute('data-tab');
                    switchTab(tab);
                });
            });

            // Sous-tabs pour les transactions en attente
            document.querySelectorAll('[data-subtab]').forEach(tab => {
                tab.addEventListener('click', function() {
                    const subtab = this.getAttribute('data-subtab');
                    switchSubTab(subtab);
                });
            });

            // Filtres des transactions
            document.getElementById('transaction-type-filter').addEventListener('change', loadAllTransactions);
            document.getElementById('transaction-status-filter').addEventListener('change', loadAllTransactions);
        }

        function switchTab(tabName) {
            // Mettre √† jour la navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');

            // Afficher le contenu correspondant
            document.querySelectorAll('.tab-content').forEach(content => {
                content.style.display = 'none';
            });
            document.getElementById(`${tabName}-tab`).style.display = 'block';

            // Mettre √† jour le titre
            document.getElementById('page-title').textContent = 
                document.querySelector(`[data-tab="${tabName}"]`).textContent.trim();

            // Charger les donn√©es sp√©cifiques √† l'onglet
            switch(tabName) {
                case 'dashboard':
                    loadDashboard();
                    break;
                case 'pending':
                    loadPendingTransactions();
                    break;
                case 'users':
                    loadUsers();
                    break;
                case 'transactions':
                    loadAllTransactions();
                    break;
                case 'reports':
                    loadReports();
                    break;
            }
        }

        function switchSubTab(subtabName) {
            // Mettre √† jour les sous-tabs
            document.querySelectorAll('[data-subtab]').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-subtab="${subtabName}"]`).classList.add('active');

            // Charger les donn√©es du sous-tab
            loadPendingSubTab(subtabName);
        }

        async function loadData() {
            await loadDashboard();
        }

        async function loadDashboard() {
            try {
                const response = await fetch('https://miniezuka-production.up.railway.app/admin/api/stats');
                const data = await response.json();

                // Mettre √† jour les statistiques
                document.getElementById('total-users').textContent = data.total_users;
                document.getElementById('total-balance').textContent = data.total_balance.toLocaleString();
                document.getElementById('total-pending').textContent = 
                    data.pending_deposits + data.pending_withdrawals + data.pending_transfers;
                document.getElementById('deposits-24h').textContent = data.new_deposits_24h;
                document.getElementById('new-users-24h').textContent = `+${data.new_users_24h} aujourd'hui`;

                // Mettre √† jour le badge
                document.getElementById('pending-badge').textContent = 
                    data.pending_deposits + data.pending_withdrawals + data.pending_transfers;

                // Charger les transactions r√©centes
                await loadRecentTransactions();

            } catch (error) {
                console.error('Erreur lors du chargement du dashboard:', error);
            }
        }

        async function loadRecentTransactions() {
            try {
                const response = await fetch('https://miniezuka-production.up.railway.app/admin/api/transactions?page=1&per_page=10');
                const data = await response.json();
                
                const tbody = document.getElementById('recent-transactions-body');
                tbody.innerHTML = '';

                data.transactions.forEach(transaction => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${getTransactionTypeIcon(transaction.type)} ${transaction.type}</td>
                        <td>${transaction.user_phone}</td>
                        <td>${transaction.amount} ${transaction.currency}</td>
                        <td><span class="badge ${transaction.status}">${transaction.status}</span></td>
                        <td>${transaction.created_at}</td>
                        <td>
                            ${transaction.status === 'pending' ? `
                                <button class="btn btn-approve" onclick="approveTransaction('${transaction.type}', ${transaction.id})">‚úì</button>
                                <button class="btn btn-reject" onclick="rejectTransaction('${transaction.type}', ${transaction.id})">‚úó</button>
                            ` : ''}
                            <button class="btn btn-view" onclick="viewTransaction(${transaction.id}, '${transaction.type}')">üëÅÔ∏è</button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });

            } catch (error) {
                console.error('Erreur lors du chargement des transactions r√©centes:', error);
            }
        }

        async function loadPendingTransactions() {
            try {
                const response = await fetch('https://miniezuka-production.up.railway.app/admin/api/pending_transactions');
                const data = await response.json();
                
                const container = document.getElementById('all-pending');
                container.innerHTML = '';

                // Afficher tous les types de transactions en attente
                displayPendingTransactions(data.deposits, 'D√©p√¥ts', container);
                displayPendingTransactions(data.withdrawals, 'Retraits', container);
                displayPendingTransactions(data.transfers, 'Transferts', container);

            } catch (error) {
                console.error('Erreur lors du chargement des transactions en attente:', error);
            }
        }

        function displayPendingTransactions(transactions, title, container) {
            if (transactions.length === 0) return;

            const section = document.createElement('div');
            section.className = 'section';
            section.innerHTML = `
                <div class="section-header">
                    <h4>${title} (${transactions.length})</h4>
                </div>
                <div class="section-content">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Utilisateur</th>
                                    <th>Montant</th>
                                    <th>D√©tails</th>
                                    <th>Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${transactions.map(t => `
                                    <tr>
                                        <td>${t.user_phone}<br><small>${t.user_name}</small></td>
                                        <td>${t.amount} ${t.currency}</td>
                                        <td>${getTransactionDetails(t)}</td>
                                        <td>${t.created_at}</td>
                                        <td>
                                            <button class="btn btn-approve" onclick="approveTransaction('${t.type}', ${t.id})">Approuver</button>
                                            <button class="btn btn-reject" onclick="rejectTransaction('${t.type}', ${t.id})">Rejeter</button>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
            container.appendChild(section);
        }

        function getTransactionDetails(transaction) {
            switch(transaction.type) {
                case 'deposit':
                    return `M√©thode: ${transaction.method}<br>Pays: ${transaction.country}`;
                case 'withdrawal':
                    return `M√©thode: ${transaction.method}<br>Net: ${transaction.net_amount} ${transaction.currency}`;
                case 'transfer':
                    return `Vers: ${transaction.recipient_phone}<br>Pays: ${transaction.country}`;
                default:
                    return transaction.note || '-';
            }
        }

        function getTransactionTypeIcon(type) {
            const icons = {
                'deposit': 'üí∞',
                'withdrawal': 'üí∏',
                'transfer': 'üîÑ'
            };
            return icons[type] || 'üìÑ';
        }

        async function loadUsers() {
            try {
                const response = await fetch(`https://miniezuka-production.up.railway.app/admin/api/users?page=${currentPage.users}`);
                const data = await response.json();
                
                const tbody = document.getElementById('users-table-body');
                tbody.innerHTML = '';

                data.users.forEach(user => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${user.first_name} ${user.last_name}</td>
                        <td>${user.phone}</td>
                        <td>${user.country}</td>
                        <td>${user.balance} XOF</td>
                        <td>${user.created_at}</td>
                        <td>
                            <button class="btn btn-view" onclick="viewUser(${user.id})">D√©tails</button>
                            ${!user.is_admin ? `<button class="btn" onclick="editBalance(${user.id})">Modifier Solde</button>` : ''}
                        </td>
                    `;
                    tbody.appendChild(row);
                });

                updatePagination('users', data);

            } catch (error) {
                console.error('Erreur lors du chargement des utilisateurs:', error);
            }
        }

        async function loadAllTransactions() {
            try {
                const type = document.getElementById('transaction-type-filter').value;
                const status = document.getElementById('transaction-status-filter').value;
                
                const response = await fetch(`https://miniezuka-production.up.railway.app/admin/api/transactions?type=${type}&status=${status}&page=${currentPage.transactions}`);
                const data = await response.json();
                
                const tbody = document.getElementById('all-transactions-body');
                tbody.innerHTML = '';

                data.transactions.forEach(transaction => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${getTransactionTypeIcon(transaction.type)} ${transaction.type}</td>
                        <td>${transaction.user_phone}</td>
                        <td>${transaction.amount} ${transaction.currency}</td>
                        <td><span class="badge ${transaction.status}">${transaction.status}</span></td>
                        <td>${transaction.created_at}</td>
                        <td>
                            <button class="btn btn-view" onclick="viewTransaction(${transaction.id}, '${transaction.type}')">D√©tails</button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });

                updatePagination('transactions', data);

            } catch (error) {
                console.error('Erreur lors du chargement de toutes les transactions:', error);
            }
        }

        function updatePagination(type, data) {
            const container = document.getElementById(`${type}-pagination`);
            container.innerHTML = '';

            if (data.total_pages > 1) {
                for (let i = 1; i <= data.total_pages; i++) {
                    const button = document.createElement('button');
                    button.className = `btn ${i === currentPage[type] ? 'btn-view' : ''}`;
                    button.textContent = i;
                    button.onclick = () => {
                        currentPage[type] = i;
                        type === 'users' ? loadUsers() : loadAllTransactions();
                    };
                    container.appendChild(button);
                }
            }
        }

        async function approveTransaction(type, id) {
            if (!confirm('√ätes-vous s√ªr de vouloir approuver cette transaction ?')) return;

            try {
                const response = await fetch(`https://miniezuka-production.up.railway.app/admin/approve_${type}/${id}`, {
                    method: 'POST'
                });
                
                if (response.ok) {
                    alert('Transaction approuv√©e avec succ√®s !');
                    loadData();
                } else {
                    alert('Erreur lors de l\'approbation');
                }
            } catch (error) {
                console.error('Erreur:', error);
                alert('Erreur lors de l\'approbation');
            }
        }

        async function rejectTransaction(type, id) {
            if (!confirm('√ätes-vous s√ªr de vouloir rejeter cette transaction ?')) return;

            try {
                const response = await fetch(`https://miniezuka-production.up.railway.app/admin/reject_${type}/${id}`, {
                    method: 'POST'
                });
                
                if (response.ok) {
                    alert('Transaction rejet√©e avec succ√®s !');
                    loadData();
                } else {
                    alert('Erreur lors du rejet');
                }
            } catch (error) {
                console.error('Erreur:', error);
                alert('Erreur lors du rejet');
            }
        }

        function viewUser(userId) {
            alert(`Voir les d√©tails de l'utilisateur ${userId}`);
            // Impl√©mentez la vue d√©taill√©e de l'utilisateur
        }

        function viewTransaction(transactionId, type) {
            alert(`Voir les d√©tails de la transaction ${transactionId} (${type})`);
            // Impl√©mentez la vue d√©taill√©e de la transaction
        }

        function editBalance(userId) {
            const newBalance = prompt('Nouveau solde:');
            if (newBalance !== null) {
                // Impl√©mentez la modification du solde
                alert(`Modification du solde de l'utilisateur ${userId} √† ${newBalance}`);
            }
        }

        function loadReports() {
            // Impl√©mentez les graphiques et rapports
            alert('Section rapports - √Ä impl√©menter');
        }

        function logout() {
            if (confirm('√ätes-vous s√ªr de vouloir vous d√©connecter ?')) {
                window.location.href = '/logout';
            }
        }

        // Charger les sous-tabs des transactions en attente
        async function loadPendingSubTab(subtabName) {
            // Impl√©mentation similaire √† loadPendingTransactions mais filtr√©e
        }
    </script>
</body>
</html>